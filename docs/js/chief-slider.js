"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t,i){i=i||{bubbles:!1,cancelable:!1,detail:null};var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),e});var WRAPPER_SELECTOR=".slider__wrapper",ITEMS_SELECTOR=".slider__items",ITEM_SELECTOR=".slider__item",CONTROL_CLASS="slider__control",SELECTOR_PREV='.slider__control[data-slide="prev"]',SELECTOR_NEXT='.slider__control[data-slide="next"]',SELECTOR_INDICATOR=".slider__indicators>li",SLIDER_TRANSITION_OFF="slider_disable-transition",CLASS_CONTROL_HIDE="slider__control_hide",CLASS_ITEM_ACTIVE="slider__item_active",CLASS_INDICATOR_ACTIVE="active";function ChiefSlider(t,i){var e,s="string"==typeof t?document.querySelector(t):t;for(e in this._$root=s,this._$wrapper=s.querySelector(WRAPPER_SELECTOR),this._$items=s.querySelector(ITEMS_SELECTOR),this._$itemList=s.querySelectorAll(ITEM_SELECTOR),this._$controlPrev=s.querySelector(SELECTOR_PREV),this._$controlNext=s.querySelector(SELECTOR_NEXT),this._$indicatorList=s.querySelectorAll(SELECTOR_INDICATOR),this._minOrder=0,this._maxOrder=0,this._$itemWithMinOrder=null,this._$itemWithMaxOrder=null,this._minTranslate=0,this._maxTranslate=0,this._direction="next",this._balancingItemsFlag=!1,this._activeItems=[],this._transform=0,this._hasSwipeState=!1,this.__swipeStartPos=0,this._transform=0,this._intervalId=null,this._config={loop:!0,autoplay:!1,interval:5e3,refresh:!0,swipe:!0},i)this._config.hasOwnProperty(e)&&(this._config[e]=i[e]);var r=this._$itemList,t=r[0].offsetWidth,s=this._$wrapper.offsetWidth,n=Math.round(s/t);this._widthItem=t,this._widthWrapper=s,this._itemsInVisibleArea=n,this._transformStep=100/n;for(var a=0,o=r.length;a<o;a++)r[a].dataset.index=a,r[a].dataset.order=a,r[a].dataset.translate=0,a<n&&this._activeItems.push(a);this._config.loop?(t=r.length-1,s=100*-r.length,r[t].dataset.order=-1,r[t].dataset.translate=100*-r.length,r[t].style.transform="translateX("+s+"%)",this.__refreshExtremeValues()):this._$controlPrev&&this._$controlPrev.classList.add(CLASS_CONTROL_HIDE),this._setActiveClass(),this._addEventListener(),this._updateIndicators(),this._autoplay()}ChiefSlider.prototype._addEventListener=function(){var t=this._$root,i=this._$items,e=this._config;function s(t){this._autoplay("stop");t=0===t.type.search("touch")?t.touches[0]:t;this._swipeStartPos=t.clientX,this._hasSwipeState=!0}function r(t){this._hasSwipeState&&(t=0===t.type.search("touch")?t.changedTouches[0]:t,50<(t=this._swipeStartPos-t.clientX)?(this._direction="next",this._move()):t<-50&&(this._direction="prev",this._move()),this._hasSwipeState=!1,this._config.loop&&this._autoplay())}t.addEventListener("click",function(t){var i=t.target;this._autoplay("stop"),i.classList.contains(CONTROL_CLASS)?(t.preventDefault(),this._direction=i.dataset.slide,this._move()):i.dataset.slideTo&&(i=parseInt(i.dataset.slideTo),this._moveTo(i)),this._config.loop&&this._autoplay()}.bind(this)),t.addEventListener("mouseenter",function(t){this._autoplay("stop")}.bind(this)),t.addEventListener("mouseleave",function(t){this._autoplay()}.bind(this)),e.refresh&&window.addEventListener("resize",function(){window.requestAnimationFrame(this._refresh.bind(this))}.bind(this)),e.loop&&(i.addEventListener("transition-start",function(){this._balancingItemsFlag||(this._balancingItemsFlag=!0,window.requestAnimationFrame(this._balancingItems.bind(this)))}.bind(this)),i.addEventListener("transitionend",function(){this._balancingItemsFlag=!1}.bind(this))),e.swipe&&(t.addEventListener("touchstart",s.bind(this)),t.addEventListener("mousedown",s.bind(this)),document.addEventListener("touchend",r.bind(this)),document.addEventListener("mouseup",r.bind(this))),t.addEventListener("dragstart",function(t){t.preventDefault()}.bind(this)),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState?this._autoplay("stop"):"visible"===document.visibilityState&&this._config.loop&&this._autoplay()}.bind(this))},ChiefSlider.prototype.__refreshExtremeValues=function(){var t=this._$itemList;this._minOrder=+t[0].dataset.order,this._maxOrder=this._minOrder,this._$itemByMinOrder=t[0],this._$itemByMaxOrder=t[0],this._minTranslate=+t[0].dataset.translate,this._maxTranslate=this._minTranslate;for(var i=0,e=t.length;i<e;i++){var s=t[i],r=+s.dataset.order;r<this._minOrder?(this._minOrder=r,this._$itemByMinOrder=s,this._minTranslate=+s.dataset.translate):r>this._maxOrder&&(this._maxOrder=r,this._$itemByMaxOrder=s,this._minTranslate=+s.dataset.translate)}},ChiefSlider.prototype._balancingItems=function(){var t,i,e,s,r,n;this._balancingItemsFlag&&(t=(n=this._$wrapper.getBoundingClientRect()).width/this._itemsInVisibleArea/2,i=this._$itemList.length,"next"===this._direction?(e=n.left,r=this._$itemByMinOrder,s=this._minTranslate,r.getBoundingClientRect().right<e-t&&(r.dataset.order=this._minOrder+i,r.dataset.translate=s+=100*i,r.style.transform="translateX(".concat(s,"%)"),this.__refreshExtremeValues())):(r=n.right,n=this._$itemByMaxOrder,s=this._maxTranslate,n.getBoundingClientRect().left>r+t&&(n.dataset.order=this._maxOrder-i,n.dataset.translate=s-=100*i,n.style.transform="translateX(".concat(s,"%)"),this.__refreshExtremeValues())),requestAnimationFrame(this._balancingItems.bind(this)))},ChiefSlider.prototype._setActiveClass=function(){for(var t=this._activeItems,i=this._$itemList,e=0,s=i.length;e<s;e++){var r=i[e],n=+r.dataset.index;-1<t.indexOf(n)?r.classList.add(CLASS_ITEM_ACTIVE):r.classList.remove(CLASS_ITEM_ACTIVE)}},ChiefSlider.prototype._updateIndicators=function(){var t=this._$indicatorList,i=this._$itemList;if(t.length)for(var e=0,s=i.length;e<s;e++)i[e].classList.contains(CLASS_ITEM_ACTIVE)?t[e].classList.add(CLASS_INDICATOR_ACTIVE):t[e].classList.remove(CLASS_INDICATOR_ACTIVE)},ChiefSlider.prototype._move=function(){var t="next"===this._direction?-this._transformStep:this._transformStep,i=this._transform+t;if(!this._config.loop){t=this._transformStep*(this._$itemList.length-this._itemsInVisibleArea);if((i=Math.round(10*i)/10)<-t||0<i)return;this._$controlPrev.classList.remove(CLASS_CONTROL_HIDE),this._$controlNext.classList.remove(CLASS_CONTROL_HIDE),i===-t?this._$controlNext.classList.add(CLASS_CONTROL_HIDE):0===i&&this._$controlPrev.classList.add(CLASS_CONTROL_HIDE)}var e,s,r,n=[],a=0;if("next"===this._direction)for(a=0,e=this._activeItems.length;a<e;a++)s=this._activeItems[a],(r=++s)>this._$itemList.length-1&&(r-=this._$itemList.length),n.push(r);else for(a=0,e=this._activeItems.length;a<e;a++)s=this._activeItems[a],(r=--s)<0&&(r+=this._$itemList.length),n.push(r);this._activeItems=n,this._setActiveClass(),this._updateIndicators(),this._transform=i,this._$items.style.transform="translateX("+i+"%)",this._$items.dispatchEvent(new CustomEvent("transition-start",{bubbles:!0}))},ChiefSlider.prototype._moveToNext=function(){this._direction="next",this._move()},ChiefSlider.prototype._moveToPrev=function(){this._direction="prev",this._move()},ChiefSlider.prototype._moveTo=function(t){for(var i=this._$indicatorList,e=null,s=null,r=0,n=i.length;r<n;r++){var a=i[r];a.classList.contains(CLASS_INDICATOR_ACTIVE)&&(a=+a.dataset.slideTo,(null===s||Math.abs(t-a)<s)&&(e=a,s=Math.abs(t-e)))}if(0!==(s=t-e))for(this._direction=0<s?"next":"prev",r=1;r<=Math.abs(s);r++)this._move()},ChiefSlider.prototype._autoplay=function(t){if(this._config.autoplay)return"stop"===t?(clearInterval(this._intervalId),void(this._intervalId=null)):void(null===this._intervalId&&(this._intervalId=setInterval(function(){this._direction="next",this._move()}.bind(this),this._config.interval)))},ChiefSlider.prototype._refresh=function(){var t=this._$itemList,i=t[0].offsetWidth,e=this._$wrapper.offsetWidth,s=Math.round(e/i);if(s!==this._itemsInVisibleArea){this._autoplay("stop"),this._$items.classList.add(SLIDER_TRANSITION_OFF),this._$items.style.transform="translateX(0)",this._widthItem=i,this._widthWrapper=e,this._itemsInVisibleArea=s,this._transform=0,this._transformStep=100/s,this._balancingItemsFlag=!1,this._activeItems=[];for(var r=0,n=t.length;r<n;r++){var a=t[r],o=r;a.dataset.index=o,a.dataset.order=o,a.dataset.translate=0,a.style.transform="translateX(0)",o<s&&this._activeItems.push(o)}this._setActiveClass(),this._updateIndicators(),window.requestAnimationFrame(function(){this._$items.classList.remove(SLIDER_TRANSITION_OFF)}.bind(this)),this._config.loop?(i=t.length-1,e=100*-t.length,t[i].dataset.order=-1,t[i].dataset.translate=100*-t.length,t[i].style.transform="translateX(".concat(e,"%)"),this.__refreshExtremeValues(),this._autoplay()):this._$controlPrev&&this._$controlPrev.classList.add(CLASS_CONTROL_HIDE)}},ChiefSlider.prototype.next=function(){this._moveToNext()},ChiefSlider.prototype.prev=function(){this._moveToPrev()},ChiefSlider.prototype.moveTo=function(t){this._moveTo(t)},ChiefSlider.prototype.refresh=function(){this._refresh()};